<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <div class="card-body" id="talk-card" style="overflow-y: scroll; min-height: 350px; max-height: 350px;" th:fragment="fragment-interview-history(messageHistory, recommendationQuestions)">
    <article id="talk-history">
      <th:block th:unless="${#lists.isEmpty(messageHistory)}">
        <th:block th:each="message, messageStat : ${messageHistory}" class="d-flex mb-3">
          <li th:object="${message.question}" th:if="${not #strings.isEmpty(message.question.content)}"
              class="d-flex mb-3 justify-content-start">
            <div class="d-flex flex-row justify-content-start col-10" style="min-width:0px;">
              <img src="../image/interviewer.png" alt="면접관 사진" style="width: 50px; height: 50px;">
              <div class="p-3 ms-3" style="border-radius: 15px; background-color: rgba(57, 192, 237,.2); min-width:0px;">
                <input type="hidden" name="role" class="role" th:value="*{role}">
                <p class="small mb-0 content" name="content" th:text="*{content}">면접관의 텍스트</p>
              </div>
              <div th:if="${messageStat.last AND (message.answer == null OR message.answer.content == null) }" class="d-flex align-items-end col-2 ps-2" style="min-width:0px;" id="retryBtnDiv">
                <button id="retryBtn" class="btn btn-primary btn-sm" onclick="retryRecommendation()">
                  <p class="small mb-0">다른 질문</p>
                </button>
              </div>
              <div class="d-flex align-items-end col-2" style="min-width:0px;" id="reviewBtnDiv">
                <button id="reviewBtn" class="btn btn-link btn-sm">
                  <img style="height: 2vh" th:onclick="|review('*{id}')|" th:src="@{/image/review.png}" alt="다시보기">
                </button>
              </div>
            </div>
          </li>
          <li th:object="${message.answer}" th:if="${not #strings.isEmpty(message.answer.content)}"
              class="d-flex mb-3 justify-content-end">
            <div class="d-flex flex-row justify-content-end col-10" style="min-width:0px;">
              <div class="p-3 me-3 border" style="border-radius: 15px; background-color: #fbfbfb; min-width:0px;">
                <input type="hidden" name="role" class="role" th:value="*{role}">
                <p class="small mb-0 content" name="content" th:text="*{content}">면접 지원자 텍스트</p>
              </div>
              <img src="../image/applicant.png" alt="avatar" style="width: 50px; height: 50px;"
                   class="rounded-circle d-flex align-self-start shadow-1-strong">
            </div>
          </li>
        </th:block>
      </th:block>
      <li th:unless="${recommendationQuestions == null or #lists.isEmpty(recommendationQuestions)}"
          class="d-flex mb-3 justify-content-start recommended-questions">
        <div th:replace="~{fragments/interview/interview-recommended :: fragment-interview-recommended(
          questionList=${recommendationQuestions})}">테스트</div>
      </li>
    </article>
  </div>
</html>